import{u as T,i as j,a as q,b as L,E as x}from"./installSVGRenderer.ebb2d2f6.js";import{d as w,c as b,o as a,a as S,n as r,b as n,_ as G,r as M,g as z,f as E,w as Q,j as p,Q as K,R as P,k as l,e as F,m as _,F as B,L as k,A as I,B as X,q as U}from"./index.682fa589.js";import{b as H,c as J,t as O}from"./budgets.8c854936.js";import{P as W}from"./Pane.f2b744ed.js";import{B as V}from"./Button.e17d4b30.js";import{_ as A}from"./Currency.9a10601b.js";import{u as Y}from"./useMonthNames.f2c6745f.js";const Z=w({props:{class:null,values:null},setup(o){const m=o;T([j,q,L]);const i=b(()=>m.class),c=b(()=>({xAxis:{type:"category",show:!1},yAxis:{show:!1,min:Math.min(...m.values)},grid:{top:"15%",left:0,bottom:"20%",right:0},series:[{data:m.values,type:"line",smooth:!0,showSymbol:!1}]}));return(v,d)=>(a(),S(x,{class:r(n(i)),options:n(c)},null,8,["class","options"]))}}),ll="_5v _5w _5x";var sl={currencyCell:ll};const el=["type","value"],tl=w({props:{modelValue:null,max:{default:Number.MAX_SAFE_INTEGER}},emits:["update:modelValue"],setup(o,{emit:m}){const i=o,c=M(),v=z(),d=M(!1),{n:h}=E(),f=b(()=>[v.currencyCell,{[v.empty]:!i.modelValue}]),g=b(()=>{const t=i.modelValue;return d.value||!t?t||"":h(i.modelValue,"currency")}),C=t=>{m("update:modelValue",Math.max(t,0))},e=t=>{t.key==="-"&&t.preventDefault()},u=()=>{d.value=!0,P(()=>{c.value.select()})},s=t=>{const y=Number(t.target.value);!Number.isNaN(y)&&C(y)};return Q(()=>i.modelValue,(t,y)=>{(t!=null?t:0)>i.max&&y!==void 0&&m("update:modelValue",y)}),(t,y)=>(a(),p("input",{ref_key:"input",ref:c,class:r(n(f)),type:d.value?"number":"text",value:n(g),onBlur:y[0]||(y[0]=$=>d.value=!1),onFocus:u,onInput:s,onKeydown:[e,y[1]||(y[1]=K((...$)=>{var N,R;return((N=c.value)==null?void 0:N.blur)&&((R=c.value)==null?void 0:R.blur(...$))},["enter"]))]},null,42,el))}}),nl={$style:sl};var ol=G(tl,[["__cssModules",nl]]);const ul="_5y _5z _60 _62 _64 _67 _69 _6b _6d",al="_61 _63 _65 _68 _6a _6c _6e",cl="_66";var rl={textInput:ul,inline:al,empty:cl};const dl=["value"],pl=w({props:{modelValue:null,inline:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:m}){const i=o,c=M(),v=z(),d=M(!1),h=b(()=>[v.textInput,{[v.empty]:!i.modelValue,[v.inline]:i.inline}]),f=()=>{d.value=!0,P(()=>{c.value.select()})},g=C=>{m("update:modelValue",C.target.value)};return(C,e)=>(a(),p("span",{class:r(n(h))},[l("input",{ref_key:"input",ref:c,value:o.modelValue,type:"text",onBlur:e[0]||(e[0]=u=>d.value=!1),onFocus:f,onInput:g,onKeydown:e[1]||(e[1]=K((...u)=>{var s,t;return((s=c.value)==null?void 0:s.blur)&&((t=c.value)==null?void 0:t.blur(...u))},["enter"]))},null,40,dl)],2))}}),il={$style:rl};var D=G(pl,[["__cssModules",il]]);const _l="_4h",ml="_4i",yl="_4j _4k _4l _4n",vl="_4m",$l="_4o",hl="_4p _4q _4r _4t _4v _4x _4z _51 _53 _55",fl="_4s",gl="_4u",Bl="_4w _4y",Cl="_50",bl="_52",kl="_54",wl="_56",Vl="_57";var Ml={header:_l,meta:ml,top:yl,start:vl,end:$l,currencyCell:hl,firstRow:fl,firstColumn:gl,even:Bl,tlc:Cl,trc:bl,blc:kl,brc:wl,addBudgetBtn:Vl};const Gl=l("span",null,null,-1),Nl=l("span",null,null,-1),Al=l("span",null,null,-1),Il=l("span",null,null,-1),El=l("span",null,null,-1),Fl=l("span",null,null,-1),Rl=l("span",null,null,-1),Ul=l("span",null,null,-1),Dl=l("span",null,null,-1),Sl=l("span",null,null,-1),zl=l("span",null,null,-1),Kl=l("span",null,null,-1),Pl=l("span",null,null,-1),Tl=l("span",null,null,-1),jl=l("span",null,null,-1),ql=l("span",null,null,-1),Ll=l("span",null,null,-1),xl=w({props:{group:null},setup(o){const m=o,{addBudget:i,setBudgetName:c,setBudgetGroupName:v,setBudget:d,removeBudget:h}=F(),{t:f}=E(),g=M(!0),C=b(()=>{const e=new Array(12).fill(0);for(const{values:u}of m.group.budgets)for(let s=0;s<u.length;s++)e[s]+=u[s];return e});return(e,u)=>(a(),p(B,null,[_(V,{icon:g.value?"arrow-down-s-line":"arrow-right-s-line",color:"dimmed",textual:"",onClick:u[0]||(u[0]=s=>g.value=!g.value)},null,8,["icon"]),_(D,{class:r([e.$style.top,e.$style.start]),"model-value":o.group.name,inline:"","onUpdate:modelValue":u[1]||(u[1]=s=>n(v)(o.group.id,s))},null,8,["class","model-value"]),(a(!0),p(B,null,k(n(C),(s,t)=>(a(),p("span",{key:t,class:r(e.$style.top)},[l("span",null,[_(A,{value:s},null,8,["value"])])],2))),128)),l("span",{class:r(e.$style.top)},[l("span",null,I(n(f)("budget.total")),1)],2),l("span",{class:r([e.$style.top,e.$style.end])},[l("span",null,I(n(f)("budget.average")),1)],2),g.value?(a(),p(B,{key:0},[(a(!0),p(B,null,k(o.group.budgets,(s,t)=>(a(),p(B,{key:s.id+t},[Gl,_(V,{color:"dimmed",icon:"close-circle",textual:"",onClick:y=>n(h)(s.id)},null,8,["onClick"]),l("span",{class:r(e.$style.header)},[_(D,{"model-value":s.name,"onUpdate:modelValue":y=>n(c)(s.id,y)},null,8,["model-value","onUpdate:modelValue"])],2),(a(!0),p(B,null,k(s.values,(y,$)=>(a(),p("span",{class:r([e.$style.currencyCell,{[e.$style.even]:t%2,[e.$style.firstRow]:t===0,[e.$style.firstColumn]:$===0,[e.$style.tlc]:t===0&&$===0,[e.$style.trc]:t===0&&$===11,[e.$style.blc]:t===o.group.budgets.length-1&&$===0,[e.$style.brc]:t===o.group.budgets.length-1&&$===11}]),key:s.id+$},[_(ol,{"model-value":s.values[$],"onUpdate:modelValue":N=>n(d)(s.id,$,N)},null,8,["model-value","onUpdate:modelValue"])],2))),128)),l("span",{class:r(e.$style.meta)},[_(A,{value:n(H)(s.values)},null,8,["value"])],2),l("span",{class:r(e.$style.meta)},[_(A,{value:n(J)(s.values)},null,8,["value"])],2)],64))),128)),Nl,Al,_(V,{class:r(e.$style.addBudgetBtn),textual:"",text:n(f)("budget.addBudget"),onClick:u[2]||(u[2]=s=>n(i)(o.group.id))},null,8,["class","text"]),Il,El,Fl,Rl,Ul,Dl,Sl,zl,Kl,Pl,Tl,jl,ql,Ll],64)):X("",!0)],64))}}),Ql={$style:Ml};var Xl=G(xl,[["__cssModules",Ql]]);const Hl="_30",Jl="_31",Ol="_32 _33 _35 _36",Wl="_34",Yl="_37";var Zl={budgetGroups:Hl,sum:Jl,month:Ol,current:Wl,addGroupBtn:Yl};const ls=l("span",null,null,-1),ss=l("span",null,null,-1),es=l("span",null,null,-1),ts=l("span",null,null,-1),ns=l("span",null,null,-1),os=l("span",null,null,-1),us=l("span",null,null,-1),as=l("span",null,null,-1),cs=l("span",null,null,-1),rs=l("span",null,null,-1),ds=l("span",null,null,-1),ps=l("span",null,null,-1),is=l("span",null,null,-1),_s=l("span",null,null,-1),ms=l("span",null,null,-1),ys=l("span",null,null,-1),vs=l("span",null,null,-1),$s=l("span",null,null,-1),hs=l("span",null,null,-1),fs=l("span",null,null,-1),gs=l("span",null,null,-1),Bs=l("span",null,null,-1),Cs=l("span",null,null,-1),bs=l("span",null,null,-1),ks=l("span",null,null,-1),ws=w({props:{type:null},setup(o){const m=o,{state:i,addBudgetGroup:c,removeBudgetGroup:v}=F(),{t:d}=E(),h=new Date().getMonth(),f=b(()=>i[m.type]),g=Y(),C=b(()=>{const e=new Array(12).fill(0);for(const{budgets:u}of f.value)for(const{values:s}of u)for(let t=0;t<s.length;t++)e[t]+=s[t];return e});return(e,u)=>(a(),p("div",{class:r(e.$style.budgetGroups)},[ls,ss,es,(a(!0),p(B,null,k(n(g),(s,t)=>(a(),p("span",{key:s,class:r([e.$style.month,{[e.$style.current]:t===n(h)}])},[l("span",null,I(s),1)],2))),128)),ts,ns,os,us,l("span",{class:r(e.$style.sum)},I(n(d)("budget.totals")),3),(a(!0),p(B,null,k(n(C),(s,t)=>(a(),p("span",{key:t,class:r(e.$style.sum)},[_(A,{value:s},null,8,["value"])],2))),128)),as,cs,(a(!0),p(B,null,k(n(f),s=>(a(),p(B,{key:s.id},[_(V,{color:"dimmed",icon:"close-circle",textual:"",onClick:t=>n(v)(s.id)},null,8,["onClick"]),_(Xl,{group:s},null,8,["group"])],64))),128)),rs,ds,_(V,{class:r(e.$style.addGroupBtn),icon:"plus",text:n(d)("budget.addGroup"),onClick:u[0]||(u[0]=s=>n(c)(o.type))},null,8,["class","text"]),ps,is,_s,ms,ys,vs,$s,hs,fs,gs,Bs,Cs,bs,ks],2))}}),Vs={$style:Zl};var Ms=G(ws,[["__cssModules",Vs]]);const Gs="_12";var Ns={miniChart:Gs};const As=w({props:{title:null,type:null},setup(o){const m=o,{state:i}=F(),c=b(()=>O(i[m.type])),v=c.value.reduce((d,h)=>d+h,0);return(d,h)=>(a(),S(W,{amount:n(v),title:o.title},{header:U(()=>[_(Z,{class:r(d.$style.miniChart),values:n(c)},null,8,["class","values"])]),default:U(()=>[_(Ms,{type:o.type},null,8,["type"])]),_:1},8,["amount","title"]))}}),Is={$style:Ns};var Ks=G(As,[["__cssModules",Is]]);export{Ks as B};
