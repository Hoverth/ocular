import{u as J,i as O,a as Q,b as W,_ as X}from"./installSVGRenderer-5d30a377.js";import{d as G,k as g,o as r,c as K,n as c,a as n,v as I,u as P,I as q,e as p,K as D,L,_ as A,j as H,b as l,f as i,F as C,r as w,x as U,l as Y,g as R,w as S}from"./index-178b91a7.js";import{b as T,c as E,t as Z}from"./budgets-e575fe6c.js";import{P as x}from"./Pane-964d9f2c.js";import{B as N}from"./Button-a57a2283.js";import{C as V}from"./Currency-12951e8c.js";import{u as ll}from"./useMonthNames-3c17fd06.js";const sl=G({__name:"MiniChart",props:{class:null,values:null},setup(u){const y=u;J([O,Q,W]);const m=g(()=>y.class),d=g(()=>({xAxis:{type:"category",show:!1},yAxis:{show:!1,min:Math.min(...y.values)},grid:{top:"15%",left:0,bottom:"20%",right:0},series:[{data:y.values,type:"line",smooth:!0,showSymbol:!1,silent:!0}]}));return(_,$)=>(r(),K(X,{class:c(n(m)),options:n(d)},null,8,["class","options"]))}}),el=["type","value"],nl=G({__name:"CurrencyCell",props:{modelValue:null,max:{default:Number.MAX_SAFE_INTEGER}},emits:["update:modelValue"],setup(u,{emit:y}){const m=u,d=I(),_=I(!1),{n:$}=P(),h=g(()=>{const t=m.modelValue;return _.value||!t?t||"":$(m.modelValue,"currency")}),k=t=>{y("update:modelValue",Math.max(t,0))},M=t=>{t.key==="-"&&t.preventDefault()},v=()=>{_.value=!0,L(()=>{d.value.select()})},a=t=>{const e=Number(t.target.value);!Number.isNaN(e)&&k(e)};return q(()=>m.modelValue,(t,e)=>{(t??0)>m.max&&e!==void 0&&y("update:modelValue",e)}),(t,e)=>(r(),p("input",{ref_key:"input",ref:d,class:c(t.$style.currencyCell),type:_.value?"number":"text",value:n(h),onBlur:e[0]||(e[0]=s=>_.value=!1),onFocus:v,onInput:a,onKeydown:[M,e[1]||(e[1]=D((...s)=>{var f,o;return((f=d.value)==null?void 0:f.blur)&&((o=d.value)==null?void 0:o.blur(...s))},["enter"]))]},null,42,el))}}),tl="ib",ol={currencyCell:tl},ul={$style:ol},al=A(nl,[["__cssModules",ul]]),cl=["value"],rl=G({__name:"TextCell",props:{modelValue:null,inline:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{emit:y}){const m=u,d=I(),_=H(),$=I(!1),h=g(()=>[_.textInput,{[_.empty]:!m.modelValue,[_.inline]:m.inline}]),k=()=>{$.value=!0,L(()=>{d.value.select()})},M=v=>{y("update:modelValue",v.target.value)};return(v,a)=>(r(),p("span",{class:c(n(h))},[l("input",{ref_key:"input",ref:d,value:u.modelValue,type:"text",onBlur:a[0]||(a[0]=t=>$.value=!1),onFocus:k,onInput:M,onKeydown:a[1]||(a[1]=D((...t)=>{var e,s;return((e=d.value)==null?void 0:e.blur)&&((s=d.value)==null?void 0:s.blur(...t))},["enter"]))},null,40,cl)],2))}}),dl="jb",il="kb",pl="lb",ml={textInput:dl,inline:il,empty:pl},_l={$style:ml},j=A(rl,[["__cssModules",_l]]),yl=l("span",null,null,-1),$l=l("span",null,null,-1),vl=l("span",null,null,-1),fl=l("span",null,null,-1),hl=l("span",null,null,-1),gl=l("span",null,null,-1),Cl=l("span",null,null,-1),bl=l("span",null,null,-1),Bl=l("span",null,null,-1),kl=l("span",null,null,-1),Ml=l("span",null,null,-1),Vl=l("span",null,null,-1),wl=l("span",null,null,-1),Gl=l("span",null,null,-1),Nl=l("span",null,null,-1),Il=G({__name:"BudgetGroup",props:{group:null},setup(u){const y=u,{addBudget:m,setBudgetName:d,setBudgetGroupName:_,setBudget:$,removeBudget:h,isCurrentMonth:k}=R(),{t:M}=P(),v=I(!0),a=g(()=>{const s=new Array(12).fill(0);for(const{values:f}of y.group.budgets)for(let o=0;o<f.length;o++)s[o]+=f[o];return s}),t=g(()=>T(a.value)),e=g(()=>E(a.value));return(s,f)=>(r(),p(C,null,[i(N,{icon:v.value?"arrow-down-s-line":"arrow-right-s-line",color:"dimmed",textual:"",onClick:f[0]||(f[0]=o=>v.value=!v.value)},null,8,["icon"]),i(j,{class:c([s.$style.top,s.$style.start]),"model-value":u.group.name,inline:"","onUpdate:modelValue":f[1]||(f[1]=o=>n(_)(u.group.id,o))},null,8,["class","model-value"]),(r(!0),p(C,null,w(n(a),(o,b)=>(r(),p("span",{key:b,class:c(s.$style.top)},[i(V,{value:o},null,8,["value"])],2))),128)),l("span",{class:c(s.$style.top)},[l("span",null,U(n(M)("budget.total")),1)],2),l("span",{class:c([s.$style.top,s.$style.end])},[l("span",null,U(n(M)("budget.average")),1)],2),v.value?(r(),p(C,{key:0},[(r(!0),p(C,null,w(u.group.budgets,(o,b)=>(r(),p(C,{key:o.id+b},[yl,i(N,{color:"dimmed",icon:"close-circle",textual:"",onClick:F=>n(h)(o.id)},null,8,["onClick"]),l("span",{class:c(s.$style.header)},[i(j,{"model-value":o.name,"onUpdate:modelValue":F=>n(d)(o.id,F)},null,8,["model-value","onUpdate:modelValue"])],2),(r(!0),p(C,null,w(o.values,(F,B)=>(r(),p("span",{class:c([s.$style.currencyCell,{[s.$style.even]:b%2,[s.$style.firstRow]:b===0,[s.$style.firstColumn]:B===0,[s.$style.currentMonth]:n(k)(B),[s.$style.tlc]:b===0&&B===0,[s.$style.trc]:b===0&&B===11,[s.$style.blc]:b===u.group.budgets.length-1&&B===0,[s.$style.brc]:b===u.group.budgets.length-1&&B===11}]),key:o.id+B},[i(al,{"model-value":o.values[B],"onUpdate:modelValue":z=>n($)(o.id,B,z)},null,8,["model-value","onUpdate:modelValue"])],2))),128)),i(V,{class:c(s.$style.meta),value:n(T)(o.values)},null,8,["class","value"]),i(V,{class:c(s.$style.meta),value:n(E)(o.values)},null,8,["class","value"])],64))),128)),$l,i(N,{icon:"plus",class:c(s.$style.addBudgetBtn),textual:"",onClick:f[2]||(f[2]=o=>n(m)(u.group.id)),color:"success"},null,8,["class"]),vl,fl,hl,gl,Cl,bl,Bl,kl,Ml,Vl,wl,Gl,Nl,i(V,{class:c([s.$style.meta,s.$style.bold]),value:n(t)},null,8,["class","value"]),i(V,{class:c([s.$style.meta,s.$style.bold]),value:n(e)},null,8,["class","value"])],64)):Y("",!0)],64))}}),Al="I_",Ul="J_",Fl="K_",Kl="L_",Pl="M_",Rl="N_",Sl="O_",Tl="P_",El="Q_",jl="R_",Dl="S_",Ll="T_",zl="U_",Jl="V_",Ol="W_",Ql={header:Al,meta:Ul,bold:Fl,top:Kl,start:Pl,end:Rl,currencyCell:Sl,firstRow:Tl,firstColumn:El,currentMonth:jl,even:Dl,tlc:Ll,trc:zl,blc:Jl,brc:Ol},Wl={$style:Ql},Xl=A(Il,[["__cssModules",Wl]]),ql=l("span",null,null,-1),Hl=l("span",null,null,-1),Yl=l("span",null,null,-1),Zl=l("span",null,null,-1),xl=l("span",null,null,-1),ls=l("span",null,null,-1),ss=l("span",null,null,-1),es=l("span",null,null,-1),ns=l("span",null,null,-1),ts=l("span",null,null,-1),os=l("span",null,null,-1),us=l("span",null,null,-1),as=l("span",null,null,-1),cs=l("span",null,null,-1),rs=l("span",null,null,-1),ds=l("span",null,null,-1),is=l("span",null,null,-1),ps=l("span",null,null,-1),ms=l("span",null,null,-1),_s=l("span",null,null,-1),ys=l("span",null,null,-1),$s=l("span",null,null,-1),vs=l("span",null,null,-1),fs=l("span",null,null,-1),hs=G({__name:"BudgetGroups",props:{type:null},setup(u){const y=u,{state:m,addBudgetGroup:d,removeBudgetGroup:_,isCurrentMonth:$}=R(),{t:h}=P(),k=g(()=>m[y.type]),M=ll(),v=g(()=>{const a=new Array(12).fill(0);for(const{budgets:t}of k.value)for(const{values:e}of t)for(let s=0;s<e.length;s++)a[s]+=e[s];return a});return(a,t)=>(r(),p("div",{class:c(a.$style.budgetGroups)},[ql,Hl,Yl,(r(!0),p(C,null,w(n(M),(e,s)=>(r(),p("span",{key:e,class:c([a.$style.month,{[a.$style.current]:n($)(s)}])},[l("span",null,U(e),1)],2))),128)),Zl,xl,ls,ss,l("span",{class:c(a.$style.sum)},U(n(h)("budget.totals")),3),(r(!0),p(C,null,w(n(v),(e,s)=>(r(),K(V,{value:e,key:s,class:c(a.$style.sum)},null,8,["value","class"]))),128)),es,ns,(r(!0),p(C,null,w(n(k),e=>(r(),p(C,{key:e.id},[i(N,{color:"dimmed",icon:"close-circle",textual:"",onClick:s=>n(_)(e.id)},null,8,["onClick"]),i(Xl,{group:e},null,8,["group"])],64))),128)),ts,i(N,{class:c(a.$style.addGroupBtn),icon:"plus",text:n(h)("budget.addGroup"),onClick:t[0]||(t[0]=e=>n(d)(u.type))},null,8,["class","text"]),os,us,as,cs,rs,ds,is,ps,ms,_s,ys,$s,vs,fs],2))}}),gs="f_",Cs="g_",bs="h_",Bs="i_",ks="j_",Ms={budgetGroups:gs,sum:Cs,month:bs,current:Bs,addGroupBtn:ks},Vs={$style:Ms},ws=A(hs,[["__cssModules",Vs]]),Gs=G({__name:"BudgetPane",props:{title:null,type:null},setup(u){const y=u,{state:m}=R(),d=g(()=>Z(m[y.type])),_=g(()=>d.value.reduce(($,h)=>$+h,0));return($,h)=>(r(),K(x,{amount:n(_),title:u.title},{header:S(()=>[i(sl,{class:c($.$style.miniChart),values:n(d)},null,8,["class","values"])]),default:S(()=>[i(ws,{type:u.type},null,8,["type"])]),_:1},8,["amount","title"]))}}),Ns="r",Is={miniChart:Ns},As={$style:Is},Es=A(Gs,[["__cssModules",As]]);export{Es as B};
