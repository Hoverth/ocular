import{u as D,i as q,a as L,b as X,_ as j}from"./installSVGRenderer-95d0bd50.js";import{d as V,k as C,o as u,c as S,n as r,a as t,v as G,u as U,I as z,e as p,K as T,L as E,_ as N,j as Q,b as l,f as m,F as f,r as M,x as A,l as W,g as F,w as P}from"./index-a78828f4.js";import{b as Y,c as Z,t as H}from"./budgets-e575fe6c.js";import{P as J}from"./Pane-9535a001.js";import{B as w}from"./Button-a411126b.js";import{C as I}from"./Currency-76328cb4.js";import{u as O}from"./useMonthNames-34263a6a.js";const x=V({__name:"MiniChart",props:{class:null,values:null},setup(o){const _=o;D([q,L,X]);const d=C(()=>_.class),a=C(()=>({xAxis:{type:"category",show:!1},yAxis:{show:!1,min:Math.min(..._.values)},grid:{top:"15%",left:0,bottom:"20%",right:0},series:[{data:_.values,type:"line",smooth:!0,showSymbol:!1,color:"var(--c-primary)"}]}));return(i,y)=>(u(),S(j,{class:r(t(d)),options:t(a)},null,8,["class","options"]))}}),ll=["type","value"],sl=V({__name:"CurrencyCell",props:{modelValue:null,max:{default:Number.MAX_SAFE_INTEGER}},emits:["update:modelValue"],setup(o,{emit:_}){const d=o,a=G(),i=G(!1),{n:y}=U(),h=C(()=>{const s=d.modelValue;return i.value||!s?s||"":y(d.modelValue,"currency")}),b=s=>{_("update:modelValue",Math.max(s,0))},B=s=>{s.key==="-"&&s.preventDefault()},$=()=>{i.value=!0,E(()=>{a.value.select()})},c=s=>{const n=Number(s.target.value);!Number.isNaN(n)&&b(n)};return z(()=>d.modelValue,(s,n)=>{(s??0)>d.max&&n!==void 0&&_("update:modelValue",n)}),(s,n)=>(u(),p("input",{ref_key:"input",ref:a,class:r(s.$style.currencyCell),type:i.value?"number":"text",value:t(h),onBlur:n[0]||(n[0]=e=>i.value=!1),onFocus:$,onInput:c,onKeydown:[B,n[1]||(n[1]=T((...e)=>{var v,k;return((v=a.value)==null?void 0:v.blur)&&((k=a.value)==null?void 0:k.blur(...e))},["enter"]))]},null,42,ll))}}),el="ob",nl={currencyCell:el},tl={$style:nl},ol=N(sl,[["__cssModules",tl]]),ul=["value"],al=V({__name:"TextCell",props:{modelValue:null,inline:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:_}){const d=o,a=G(),i=Q(),y=G(!1),h=C(()=>[i.textInput,{[i.empty]:!d.modelValue,[i.inline]:d.inline}]),b=()=>{y.value=!0,E(()=>{a.value.select()})},B=$=>{_("update:modelValue",$.target.value)};return($,c)=>(u(),p("span",{class:r(t(h))},[l("input",{ref_key:"input",ref:a,value:o.modelValue,type:"text",onBlur:c[0]||(c[0]=s=>y.value=!1),onFocus:b,onInput:B,onKeydown:c[1]||(c[1]=T((...s)=>{var n,e;return((n=a.value)==null?void 0:n.blur)&&((e=a.value)==null?void 0:e.blur(...s))},["enter"]))},null,40,ul)],2))}}),cl="pb",rl="qb",pl="rb",dl={textInput:cl,inline:rl,empty:pl},il={$style:dl},R=N(al,[["__cssModules",il]]),ml=l("span",null,null,-1),_l=l("span",null,null,-1),yl=l("span",null,null,-1),$l=l("span",null,null,-1),vl=l("span",null,null,-1),hl=l("span",null,null,-1),fl=l("span",null,null,-1),gl=l("span",null,null,-1),Cl=l("span",null,null,-1),bl=l("span",null,null,-1),Bl=l("span",null,null,-1),kl=l("span",null,null,-1),Ml=l("span",null,null,-1),Vl=l("span",null,null,-1),wl=l("span",null,null,-1),Gl=l("span",null,null,-1),Nl=l("span",null,null,-1),Il=V({__name:"BudgetGroup",props:{group:null},setup(o){const _=o,{addBudget:d,setBudgetName:a,setBudgetGroupName:i,setBudget:y,removeBudget:h,isCurrentMonth:b}=F(),{t:B}=U(),$=G(!0),c=C(()=>{const s=new Array(12).fill(0);for(const{values:n}of _.group.budgets)for(let e=0;e<n.length;e++)s[e]+=n[e];return s});return(s,n)=>(u(),p(f,null,[m(w,{icon:$.value?"arrow-down-s-line":"arrow-right-s-line",color:"dimmed",textual:"",onClick:n[0]||(n[0]=e=>$.value=!$.value)},null,8,["icon"]),m(R,{class:r([s.$style.top,s.$style.start]),"model-value":o.group.name,inline:"","onUpdate:modelValue":n[1]||(n[1]=e=>t(i)(o.group.id,e))},null,8,["class","model-value"]),(u(!0),p(f,null,M(t(c),(e,v)=>(u(),p("span",{key:v,class:r(s.$style.top)},[l("span",null,[m(I,{value:e},null,8,["value"])])],2))),128)),l("span",{class:r(s.$style.top)},[l("span",null,A(t(B)("budget.total")),1)],2),l("span",{class:r([s.$style.top,s.$style.end])},[l("span",null,A(t(B)("budget.average")),1)],2),$.value?(u(),p(f,{key:0},[(u(!0),p(f,null,M(o.group.budgets,(e,v)=>(u(),p(f,{key:e.id+v},[ml,m(w,{color:"dimmed",icon:"close-circle",textual:"",onClick:k=>t(h)(e.id)},null,8,["onClick"]),l("span",{class:r(s.$style.header)},[m(R,{"model-value":e.name,"onUpdate:modelValue":k=>t(a)(e.id,k)},null,8,["model-value","onUpdate:modelValue"])],2),(u(!0),p(f,null,M(e.values,(k,g)=>(u(),p("span",{class:r([s.$style.currencyCell,{[s.$style.even]:v%2,[s.$style.firstRow]:v===0,[s.$style.firstColumn]:g===0,[s.$style.currentMonth]:t(b)(g),[s.$style.tlc]:v===0&&g===0,[s.$style.trc]:v===0&&g===11,[s.$style.blc]:v===o.group.budgets.length-1&&g===0,[s.$style.brc]:v===o.group.budgets.length-1&&g===11}]),key:e.id+g},[m(ol,{"model-value":e.values[g],"onUpdate:modelValue":K=>t(y)(e.id,g,K)},null,8,["model-value","onUpdate:modelValue"])],2))),128)),l("span",{class:r(s.$style.meta)},[m(I,{value:t(Y)(e.values)},null,8,["value"])],2),l("span",{class:r(s.$style.meta)},[m(I,{value:t(Z)(e.values)},null,8,["value"])],2)],64))),128)),_l,m(w,{icon:"plus",class:r(s.$style.addBudgetBtn),textual:"",onClick:n[2]||(n[2]=e=>t(d)(o.group.id)),color:"success"},null,8,["class"]),yl,$l,vl,hl,fl,gl,Cl,bl,Bl,kl,Ml,Vl,wl,Gl,Nl],64)):W("",!0)],64))}}),Al="P_",Ul="Q_",Fl="R_",Pl="S_",Rl="T_",Sl="U_",Tl="V_",El="W_",Kl="X_",Dl="Y_",ql="Z_",Ll="_b",Xl="ab",jl="bb",zl={header:Al,meta:Ul,top:Fl,start:Pl,end:Rl,currencyCell:Sl,firstRow:Tl,firstColumn:El,currentMonth:Kl,even:Dl,tlc:ql,trc:Ll,blc:Xl,brc:jl},Ql={$style:zl},Wl=N(Il,[["__cssModules",Ql]]),Yl=l("span",null,null,-1),Zl=l("span",null,null,-1),Hl=l("span",null,null,-1),Jl=l("span",null,null,-1),Ol=l("span",null,null,-1),xl=l("span",null,null,-1),ls=l("span",null,null,-1),ss=l("span",null,null,-1),es=l("span",null,null,-1),ns=l("span",null,null,-1),ts=l("span",null,null,-1),os=l("span",null,null,-1),us=l("span",null,null,-1),as=l("span",null,null,-1),cs=l("span",null,null,-1),rs=l("span",null,null,-1),ps=l("span",null,null,-1),ds=l("span",null,null,-1),is=l("span",null,null,-1),ms=l("span",null,null,-1),_s=l("span",null,null,-1),ys=l("span",null,null,-1),$s=l("span",null,null,-1),vs=l("span",null,null,-1),hs=V({__name:"BudgetGroups",props:{type:null},setup(o){const _=o,{state:d,addBudgetGroup:a,removeBudgetGroup:i,isCurrentMonth:y}=F(),{t:h}=U(),b=C(()=>d[_.type]),B=O(),$=C(()=>{const c=new Array(12).fill(0);for(const{budgets:s}of b.value)for(const{values:n}of s)for(let e=0;e<n.length;e++)c[e]+=n[e];return c});return(c,s)=>(u(),p("div",{class:r(c.$style.budgetGroups)},[Yl,Zl,Hl,(u(!0),p(f,null,M(t(B),(n,e)=>(u(),p("span",{key:n,class:r([c.$style.month,{[c.$style.current]:t(y)(e)}])},[l("span",null,A(n),1)],2))),128)),Jl,Ol,xl,ls,l("span",{class:r(c.$style.sum)},A(t(h)("budget.totals")),3),(u(!0),p(f,null,M(t($),(n,e)=>(u(),p("span",{key:e,class:r(c.$style.sum)},[m(I,{value:n},null,8,["value"])],2))),128)),ss,es,(u(!0),p(f,null,M(t(b),n=>(u(),p(f,{key:n.id},[m(w,{color:"dimmed",icon:"close-circle",textual:"",onClick:e=>t(i)(n.id)},null,8,["onClick"]),m(Wl,{group:n},null,8,["group"])],64))),128)),ns,m(w,{class:r(c.$style.addGroupBtn),icon:"plus",text:t(h)("budget.addGroup"),onClick:s[0]||(s[0]=n=>t(a)(o.type))},null,8,["class","text"]),ts,os,us,as,cs,rs,ps,ds,is,ms,_s,ys,$s,vs],2))}}),fs="m_",gs="n_",Cs="o_",bs="p_",Bs="q_",ks={budgetGroups:fs,sum:gs,month:Cs,current:bs,addGroupBtn:Bs},Ms={$style:ks},Vs=N(hs,[["__cssModules",Ms]]),ws=V({__name:"BudgetPane",props:{title:null,type:null},setup(o){const _=o,{state:d}=F(),a=C(()=>H(d[_.type])),i=C(()=>a.value.reduce((y,h)=>y+h,0));return(y,h)=>(u(),S(J,{amount:t(i),title:o.title},{header:P(()=>[m(x,{class:r(y.$style.miniChart),values:t(a)},null,8,["class","values"])]),default:P(()=>[m(Vs,{type:o.type},null,8,["type"])]),_:1},8,["amount","title"]))}}),Gs="x",Ns={miniChart:Gs},Is={$style:Ns},Es=N(ws,[["__cssModules",Is]]);export{Es as B};
