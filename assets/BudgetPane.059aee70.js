import{u as T,i as q,a as z,b as L,_ as Q}from"./installSVGRenderer.e1aad086.js";import{d as V,c as b,o as a,a as S,n as r,b as t,_ as G,r as M,g as j,f as F,w as X,j as p,Q as K,R as P,k as l,e as R,m as _,F as B,L as k,A as I,B as x,q as D}from"./index.40171444.js";import{b as H,c as J,t as O}from"./budgets.8c854936.js";import{P as W}from"./Pane.8ae5b62f.js";import{B as w}from"./Button.a3dd70ba.js";import{_ as A}from"./Currency.6c8c7342.js";import{u as Y}from"./useMonthNames.dee368dc.js";const Z=V({props:{class:null,values:null},setup(o){const m=o;T([q,z,L]);const i=b(()=>m.class),c=b(()=>({xAxis:{type:"category",show:!1},yAxis:{show:!1,min:Math.min(...m.values)},grid:{top:"15%",left:0,bottom:"20%",right:0},series:[{data:m.values,type:"line",smooth:!0,showSymbol:!1}]}));return(v,d)=>(a(),S(Q,{class:r(t(i)),options:t(c)},null,8,["class","options"]))}}),ll="_63 _64 _65";var sl={currencyCell:ll};const el=["type","value"],nl=V({props:{modelValue:null,max:{default:Number.MAX_SAFE_INTEGER}},emits:["update:modelValue"],setup(o,{emit:m}){const i=o,c=M(),v=j(),d=M(!1),{n:f}=F(),h=b(()=>[v.currencyCell,{[v.empty]:!i.modelValue}]),g=b(()=>{const n=i.modelValue;return d.value||!n?n||"":f(i.modelValue,"currency")}),C=n=>{m("update:modelValue",Math.max(n,0))},e=n=>{n.key==="-"&&n.preventDefault()},u=()=>{d.value=!0,P(()=>{c.value.select()})},s=n=>{const y=Number(n.target.value);!Number.isNaN(y)&&C(y)};return X(()=>i.modelValue,(n,y)=>{(n!=null?n:0)>i.max&&y!==void 0&&m("update:modelValue",y)}),(n,y)=>(a(),p("input",{ref_key:"input",ref:c,class:r(t(h)),type:d.value?"number":"text",value:t(g),onBlur:y[0]||(y[0]=$=>d.value=!1),onFocus:u,onInput:s,onKeydown:[e,y[1]||(y[1]=K((...$)=>{var N,U;return((N=c.value)==null?void 0:N.blur)&&((U=c.value)==null?void 0:U.blur(...$))},["enter"]))]},null,42,el))}}),tl={$style:sl};var ol=G(nl,[["__cssModules",tl]]);const ul="_66 _67 _68 _6a _6c _6f _6h _6j _6l",al="_69 _6b _6d _6g _6i _6k _6m",cl="_6e";var rl={textInput:ul,inline:al,empty:cl};const dl=["value"],pl=V({props:{modelValue:null,inline:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:m}){const i=o,c=M(),v=j(),d=M(!1),f=b(()=>[v.textInput,{[v.empty]:!i.modelValue,[v.inline]:i.inline}]),h=()=>{d.value=!0,P(()=>{c.value.select()})},g=C=>{m("update:modelValue",C.target.value)};return(C,e)=>(a(),p("span",{class:r(t(f))},[l("input",{ref_key:"input",ref:c,value:o.modelValue,type:"text",onBlur:e[0]||(e[0]=u=>d.value=!1),onFocus:h,onInput:g,onKeydown:e[1]||(e[1]=K((...u)=>{var s,n;return((s=c.value)==null?void 0:s.blur)&&((n=c.value)==null?void 0:n.blur(...u))},["enter"]))},null,40,dl)],2))}}),il={$style:rl};var E=G(pl,[["__cssModules",il]]);const _l="_50",ml="_51",yl="_52 _53 _54 _56",vl="_55",$l="_57",fl="_58 _59 _5a _5c _5e _5g _5i _5k _5m _5o",hl="_5b",gl="_5d",Bl="_5f _5h",Cl="_5j",bl="_5l",kl="_5n",Vl="_5p",wl="_5q";var Ml={header:_l,meta:ml,top:yl,start:vl,end:$l,currencyCell:fl,firstRow:hl,firstColumn:gl,even:Bl,tlc:Cl,trc:bl,blc:kl,brc:Vl,addBudgetBtn:wl};const Gl=l("span",null,null,-1),Nl=l("span",null,null,-1),Al=l("span",null,null,-1),Il=l("span",null,null,-1),Fl=l("span",null,null,-1),Rl=l("span",null,null,-1),Ul=l("span",null,null,-1),Dl=l("span",null,null,-1),El=l("span",null,null,-1),Sl=l("span",null,null,-1),jl=l("span",null,null,-1),Kl=l("span",null,null,-1),Pl=l("span",null,null,-1),Tl=l("span",null,null,-1),ql=l("span",null,null,-1),zl=l("span",null,null,-1),Ll=l("span",null,null,-1),Ql=V({props:{group:null},setup(o){const m=o,{addBudget:i,setBudgetName:c,setBudgetGroupName:v,setBudget:d,removeBudget:f}=R(),{t:h}=F(),g=M(!0),C=b(()=>{const e=new Array(12).fill(0);for(const{values:u}of m.group.budgets)for(let s=0;s<u.length;s++)e[s]+=u[s];return e});return(e,u)=>(a(),p(B,null,[_(w,{icon:g.value?"arrow-down-s-line":"arrow-right-s-line",color:"dimmed",textual:"",onClick:u[0]||(u[0]=s=>g.value=!g.value)},null,8,["icon"]),_(E,{class:r([e.$style.top,e.$style.start]),"model-value":o.group.name,inline:"","onUpdate:modelValue":u[1]||(u[1]=s=>t(v)(o.group.id,s))},null,8,["class","model-value"]),(a(!0),p(B,null,k(t(C),(s,n)=>(a(),p("span",{key:n,class:r(e.$style.top)},[l("span",null,[_(A,{value:s},null,8,["value"])])],2))),128)),l("span",{class:r(e.$style.top)},[l("span",null,I(t(h)("budget.total")),1)],2),l("span",{class:r([e.$style.top,e.$style.end])},[l("span",null,I(t(h)("budget.average")),1)],2),g.value?(a(),p(B,{key:0},[(a(!0),p(B,null,k(o.group.budgets,(s,n)=>(a(),p(B,{key:s.id+n},[Gl,_(w,{color:"dimmed",icon:"close-circle",textual:"",onClick:y=>t(f)(s.id)},null,8,["onClick"]),l("span",{class:r(e.$style.header)},[_(E,{"model-value":s.name,"onUpdate:modelValue":y=>t(c)(s.id,y)},null,8,["model-value","onUpdate:modelValue"])],2),(a(!0),p(B,null,k(s.values,(y,$)=>(a(),p("span",{class:r([e.$style.currencyCell,{[e.$style.even]:n%2,[e.$style.firstRow]:n===0,[e.$style.firstColumn]:$===0,[e.$style.tlc]:n===0&&$===0,[e.$style.trc]:n===0&&$===11,[e.$style.blc]:n===o.group.budgets.length-1&&$===0,[e.$style.brc]:n===o.group.budgets.length-1&&$===11}]),key:s.id+$},[_(ol,{"model-value":s.values[$],"onUpdate:modelValue":N=>t(d)(s.id,$,N)},null,8,["model-value","onUpdate:modelValue"])],2))),128)),l("span",{class:r(e.$style.meta)},[_(A,{value:t(H)(s.values)},null,8,["value"])],2),l("span",{class:r(e.$style.meta)},[_(A,{value:t(J)(s.values)},null,8,["value"])],2)],64))),128)),Nl,Al,_(w,{class:r(e.$style.addBudgetBtn),textual:"",text:t(h)("budget.addBudget"),onClick:u[2]||(u[2]=s=>t(i)(o.group.id))},null,8,["class","text"]),Il,Fl,Rl,Ul,Dl,El,Sl,jl,Kl,Pl,Tl,ql,zl,Ll],64)):x("",!0)],64))}}),Xl={$style:Ml};var xl=G(Ql,[["__cssModules",Xl]]);const Hl="_3v",Jl="_3w",Ol="_3x _3y _40 _41",Wl="_3z",Yl="_42";var Zl={budgetGroups:Hl,sum:Jl,month:Ol,current:Wl,addGroupBtn:Yl};const ls=l("span",null,null,-1),ss=l("span",null,null,-1),es=l("span",null,null,-1),ns=l("span",null,null,-1),ts=l("span",null,null,-1),os=l("span",null,null,-1),us=l("span",null,null,-1),as=l("span",null,null,-1),cs=l("span",null,null,-1),rs=l("span",null,null,-1),ds=l("span",null,null,-1),ps=l("span",null,null,-1),is=l("span",null,null,-1),_s=l("span",null,null,-1),ms=l("span",null,null,-1),ys=l("span",null,null,-1),vs=l("span",null,null,-1),$s=l("span",null,null,-1),fs=l("span",null,null,-1),hs=l("span",null,null,-1),gs=l("span",null,null,-1),Bs=l("span",null,null,-1),Cs=l("span",null,null,-1),bs=l("span",null,null,-1),ks=l("span",null,null,-1),Vs=V({props:{type:null},setup(o){const m=o,{state:i,addBudgetGroup:c,removeBudgetGroup:v}=R(),{t:d}=F(),f=new Date().getMonth(),h=b(()=>i[m.type]),g=Y(),C=b(()=>{const e=new Array(12).fill(0);for(const{budgets:u}of h.value)for(const{values:s}of u)for(let n=0;n<s.length;n++)e[n]+=s[n];return e});return(e,u)=>(a(),p("div",{class:r(e.$style.budgetGroups)},[ls,ss,es,(a(!0),p(B,null,k(t(g),(s,n)=>(a(),p("span",{key:s,class:r([e.$style.month,{[e.$style.current]:n===t(f)}])},[l("span",null,I(s),1)],2))),128)),ns,ts,os,us,l("span",{class:r(e.$style.sum)},I(t(d)("budget.totals")),3),(a(!0),p(B,null,k(t(C),(s,n)=>(a(),p("span",{key:n,class:r(e.$style.sum)},[_(A,{value:s},null,8,["value"])],2))),128)),as,cs,(a(!0),p(B,null,k(t(h),s=>(a(),p(B,{key:s.id},[_(w,{color:"dimmed",icon:"close-circle",textual:"",onClick:n=>t(v)(s.id)},null,8,["onClick"]),_(xl,{group:s},null,8,["group"])],64))),128)),rs,ds,_(w,{class:r(e.$style.addGroupBtn),icon:"plus",text:t(d)("budget.addGroup"),onClick:u[0]||(u[0]=s=>t(c)(o.type))},null,8,["class","text"]),ps,is,_s,ms,ys,vs,$s,fs,hs,gs,Bs,Cs,bs,ks],2))}}),ws={$style:Zl};var Ms=G(Vs,[["__cssModules",ws]]);const Gs="_10";var Ns={miniChart:Gs};const As=V({props:{title:null,type:null},setup(o){const m=o,{state:i}=R(),c=b(()=>O(i[m.type])),v=c.value.reduce((d,f)=>d+f,0);return(d,f)=>(a(),S(W,{amount:t(v),title:o.title},{header:D(()=>[_(Z,{class:r(d.$style.miniChart),values:t(c)},null,8,["class","values"])]),default:D(()=>[_(Ms,{type:o.type},null,8,["type"])]),_:1},8,["amount","title"]))}}),Is={$style:Ns};var Ks=G(As,[["__cssModules",Is]]);export{Ks as B};
